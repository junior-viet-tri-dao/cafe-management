<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
  <meta charset="UTF-8">
  <title>Th√™m m√≥n</title>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body>
<div layout:fragment="content">
  <div class="bg-white shadow-xl rounded-xl p-6 mt-6 max-w-3xl mx-auto">
    <h2 class="text-2xl font-bold text-[#4e342e] mb-6">‚ûï Th√™m m√≥n m·ªõi v√†o th·ª±c ƒë∆°n</h2>

    <form th:action="@{/menu/create}" method="post" x-data="{ rows: [{ id: Date.now() }] }">
      <!-- T√™n m√≥n v√† gi√° -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        <div>
          <label class="block text-sm font-medium text-gray-700">T√™n m√≥n <span class="text-red-500">*</span></label>
          <input type="text" name="tenMon" placeholder="V√≠ d·ª•: C√† ph√™ s·ªØa"
                 class="mt-1 w-full border border-gray-300 rounded-lg shadow-sm p-2 focus:ring-2 focus:ring-blue-500" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Gi√° ti·ªÅn (VNƒê) <span class="text-red-500">*</span></label>
          <input type="number" name="giaTien" placeholder="7000"
                 class="mt-1 w-full border border-gray-300 rounded-lg shadow-sm p-2 focus:ring-2 focus:ring-blue-500" required>
        </div>
      </div>

      <!-- Th√†nh ph·∫ßn -->
      <div>
        <h3 class="text-lg font-semibold mb-2 text-gray-800">üß™ Th√†nh ph·∫ßn</h3>
        <table class="w-full border border-gray-200 rounded-lg text-sm mb-4">
          <thead class="bg-[#e3f2fd] text-gray-800">
          <tr>
            <th class="p-2 text-left">T√™n th√†nh ph·∫ßn</th>
            <th class="p-2 text-right">Kh·ªëi l∆∞·ª£ng</th>
            <th class="p-2 text-center">ƒê∆°n v·ªã t√≠nh</th>
          </tr>
          </thead>
          <tbody>
          <template x-for="(row, index) in rows" :key="row.id">
            <tr class="border-t hover:bg-yellow-50 transition">
              <td class="p-2">
                <input type="text" :name="'thanhPhanList[' + index + '].tenThanhPhan'"
                       class="w-full border border-gray-300 rounded px-2 py-1"
                       placeholder="T√™n th√†nh ph·∫ßn" required>
              </td>
              <td class="p-2 text-right">
                <input type="number" step="0.1" min="0" :name="'thanhPhanList[' + index + '].khoiLuong'"
                       class="w-full border border-gray-300 rounded px-2 py-1 text-right"
                       placeholder="0.0" required>
              </td>
              <td class="p-2 flex items-center gap-2 justify-center">
                <select :name="'thanhPhanList[' + index + '].maDonViTinh'"
                        class="w-full border border-gray-300 rounded px-2 py-1" required>
                  <option value="">-- ƒê∆°n v·ªã --</option>
                  <option th:each="dv : ${units}"
                          th:value="${dv.maDonVi}" th:text="${dv.tenDonVi}">
                  </option>
                </select>
                <button type="button" @click="rows.splice(index, 1)"
                        class="text-red-500 hover:text-red-700 text-sm font-bold ml-2">
                  üóëÔ∏è
                </button>
              </td>
            </tr>
          </template>
          <!-- N√∫t th√™m d√≤ng -->
          <tr>
            <td colspan="3" class="text-center py-3">
              <button type="button" @click="rows.push({ id: Date.now() })"
                      class="bg-blue-500 hover:bg-blue-600 text-white font-semibold px-4 py-1 rounded shadow">
                ‚ûï Th√™m th√†nh ph·∫ßn
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <!-- N√∫t -->
      <div class="flex justify-end gap-4">
        <button type="submit"
                class="bg-green-600 hover:bg-green-700 text-white font-semibold px-5 py-2 rounded-lg shadow">
          ‚úÖ Th√™m m√≥n
        </button>
        <a th:href="@{/menu}" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold px-5 py-2 rounded-lg shadow">
          ‚ùå H·ªßy
        </a>
      </div>
    </form>
  </div>
</div>
</body>
</html>
