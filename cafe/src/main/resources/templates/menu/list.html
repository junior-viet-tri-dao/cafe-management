<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Danh s√°ch m√≥n</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">
<div layout:fragment="content" class="max-w-6xl mx-auto mt-10 bg-white p-6 rounded shadow">

    <h2 class="text-2xl font-bold text-blue-600 mb-6">üìã Danh s√°ch th·ª±c ƒë∆°n</h2>

    <!-- Form t√¨m ki·∫øm -->
    <form method="get" th:action="@{/menu}" class="mb-6 flex gap-2">
        <input type="text" name="keyword" placeholder="T√¨m ki·∫øm..." th:value="${keyword}"
               class="border rounded px-3 py-2 w-full max-w-sm" />
        <button type="submit"
                class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">
            üîç T√¨m
        </button>
    </form>

    <!-- B·∫£ng danh s√°ch -->
    <div class="overflow-x-auto">
        <table class="min-w-full bg-white border border-gray-300">
            <thead class="bg-gray-200">
            <tr>
                <th class="py-2 px-4 border text-left">STT</th>
                <th class="py-2 px-4 border text-left">T√™n m√≥n</th>
                <th class="py-2 px-4 border text-right">Gi√° ti·ªÅn</th>
                <th class="py-2 px-4 border text-center">H√†nh ƒë·ªông</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item, iterStat : ${items.content}" class="hover:bg-gray-50">
                <td class="py-2 px-4 border" th:text="${iterStat.index + 1}"></td>
                <td class="py-2 px-4 border" th:text="${item.itemName}"></td>
                <td class="py-2 px-4 border text-right"
                    th:text="${#numbers.formatDecimal(item.currentPrice, 0, 'COMMA', 0, 'POINT') + ' ƒë'}"></td>
                <td class="py-2 px-4 border text-center">
                    <a th:href="@{'/menu/edit/' + ${item.id}}"
                       class="text-blue-600 hover:underline mr-3">S·ª≠a</a>
                    <form th:action="@{'/menu/delete/' + ${item.id}}" method="post" class="inline"
                          onsubmit="return confirm('B·∫°n ch·∫Øc ch·∫Øn mu·ªën x√≥a?')">
                        <button type="submit" class="text-red-600 hover:underline">X√≥a</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- Ph√¢n trang -->
    <div th:if="${items.totalPages > 1}" class="mt-6 flex gap-2">
        <a th:each="i : ${#numbers.sequence(0, items.totalPages - 1)}"
           th:href="@{/menu(page=${i}, keyword=${keyword})}"
           th:text="${i + 1}"
           th:classappend="${items.number == i} ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800 hover:bg-gray-300'"
           class="px-3 py-1 rounded border text-sm"></a>
    </div>

    <!-- Th√™m m√≥n -->
    <div class="mt-6">
        <a th:href="@{/menu/add}"
           class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded inline-block">
            ‚ûï Th√™m m√≥n m·ªõi
        </a>
    </div>

</div>
</body>
</html>
