<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Danh sách các khoản chi khác</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <script th:src="@{/js/table-search.js}"></script>
</head>
<body>
<div layout:fragment="content" class="container mt-5">
    <h2 class="mb-4">📋 Danh sách các khoản chi khác</h2>

    <div class="mb-3">
        <input type="text" id="searchInput"
               class="form-control"
               placeholder="🔍 Tìm theo tên khoản chi khác..."
               onkeyup="filterTable('searchInput', 'expenseTableBody', [1])" />
    </div>

    <table class="table table-bordered table-hover">
        <thead class="table-light">
        <tr>
            <th>Tên khoản chi</th>
            <th>Ngày chi</th>
            <th>Tổng tiền</th>
            <th>Thao tác</th>
        </tr>
        </thead>
        <tbody id="expenseTableBody">
        <tr th:each="expense : ${expenses}">
            <td th:text="${expense.expenseName}">Máy in</td>
            <td th:text="${#temporals.format(expense.getExpenseDate(), 'dd/MM/yyyy')}">01/01/2025</td>
            <td th:text="${#numbers.formatDecimal(expense.getAmount(), 0, 'POINT', 0, 'COMMA')} + ' VND'">10.000 VND</td>
            <td>
                <a th:href="@{/expense/edit/{id}(id=${expense.id})}" class="btn btn-warning btn-sm">✏️ Sửa</a>
                <form th:action="@{/expense/delete/{id}(id=${expense.id})}" method="post"
                      th:id="'deleteForm-' + ${expense.id}" class="d-inline">
                    <button type="submit" class="btn btn-danger btn-sm"
                            onclick="return confirm('Bạn có chắc muốn xóa khoản chi này?');">🗑️ Xóa</button>
                </form>
            </td>
        </tr>
        <tr id="noResultsRow" style="display: none;">
            <td colspan="7" class="text-center text-danger">Không tìm thấy khoản chi nào phù hợp.</td>
        </tr>
        </tbody>
    </table>

    <a th:href="@{/home}" class="btn btn-secondary">🔙 Quay lại</a>
    <a th:href="@{/expense/new}" class="btn btn-success float-end">➕ Thêm thiết bị</a>
</div>
</body>
</html>
