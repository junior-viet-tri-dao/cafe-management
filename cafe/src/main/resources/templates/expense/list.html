<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Danh sรกch cรกc khoแบฃn chi khรกc</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <script th:src="@{/js/table-search.js}"></script>
</head>
<body>
<div layout:fragment="content" class="container mt-5">
    <h2 class="mb-4">๐ Danh sรกch cรกc khoแบฃn chi khรกc</h2>

    <div class="mb-3">
        <input type="text" id="searchInput"
               class="form-control"
               placeholder="๐ Tรฌm theo tรชn khoแบฃn chi khรกc..."
               onkeyup="filterTable('searchInput', 'expenseTableBody', [1])" />
    </div>

    <table class="table table-bordered table-hover">
        <thead class="table-light">
        <tr>
            <th>Tรชn khoแบฃn chi</th>
            <th>Ngรy chi</th>
            <th>Tแปng tiแปn</th>
            <th>Thao tรกc</th>
        </tr>
        </thead>
        <tbody id="expenseTableBody">
        <tr th:each="expense : ${expenses}">
            <td th:text="${expense.expenseName}">Mรกy in</td>
            <td th:text="${#temporals.format(expense.getExpenseDate(), 'dd/MM/yyyy')}">01/01/2025</td>
            <td th:text="${#numbers.formatDecimal(expense.getAmount(), 0, 'POINT', 0, 'COMMA')} + ' VND'">10.000 VND</td>
            <td>
                <a th:href="@{/expense/edit/{id}(id=${expense.id})}" class="btn btn-warning btn-sm">โ๏ธ Sแปญa</a>
                <form th:action="@{/expense/delete/{id}(id=${expense.id})}" method="post"
                      th:id="'deleteForm-' + ${expense.id}" class="d-inline">
                    <button type="submit" class="btn btn-danger btn-sm"
                            onclick="return confirm('Bแบกn cรณ chแบฏc muแปn xรณa khoแบฃn chi nรy?');">๐๏ธ Xรณa</button>
                </form>
            </td>
        </tr>
        <tr id="noResultsRow" style="display: none;">
            <td colspan="7" class="text-center text-danger">Khรดng tรฌm thแบฅy khoแบฃn chi nรo phรน hแปฃp.</td>
        </tr>
        </tbody>
    </table>

    <a th:href="@{/home}" class="btn btn-secondary">๐ Quay lแบกi</a>
    <a th:href="@{/expense/new}" class="btn btn-success float-end">โ Thรชm thiแบฟt bแป</a>
</div>
</body>
</html>
