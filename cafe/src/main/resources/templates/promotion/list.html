<!DOCTYPE html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω khuy·∫øn m√£i</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <script th:src="@{/js/table-search.js}"></script>
</head>
<body>
<div layout:fragment="content" class="container mt-5">
    <h2 class="mb-4">üì¢ Danh s√°ch khuy·∫øn m√£i</h2>

    <div class="mb-3">
        <input type="text" id="searchInput"
               class="form-control"
               placeholder="üîç T√¨m theo t√™n khuy·∫øn m√£i..."
               onkeyup="filterTable('searchInput', 'promotionTableBody', [1])" />
    </div>

    <table class="table table-bordered table-hover">
        <thead class="table-light">
        <tr>
            <th>ID</th>
            <th>T√™n khuy·∫øn m√£i</th>
            <th>Ng√†y b·∫Øt ƒë·∫ßu</th>
            <th>Ng√†y k·∫øt th√∫c</th>
            <th>% Gi·∫£m gi√°</th>
            <th>Tr·∫°ng th√°i</th>
            <th>M√¥ t·∫£</th>
            <th>Thao t√°c</th>
        </tr>
        </thead>
        <tbody id="promotionTableBody">
        <tr th:each="promotion : ${promotions}">
            <td th:text="${promotion.id}"></td>
            <td th:text="${promotion.promotionName}"></td>
            <td th:text="${#temporals.format(promotion.startDate, 'dd/MM/yyyy')}"></td>
            <td th:text="${#temporals.format(promotion.endDate, 'dd/MM/yyyy')}"></td>
            <td th:text="${#numbers.formatDecimal(promotion.discountValue, 1, 2, 'COMMA')} + '%'"></td>
            <td th:text="${promotion.status} ? 'Ho·∫°t ƒë·ªông' : 'Ng·ª´ng'"></td>
            <td th:text="${promotion.description}"></td>
            <td>
                <a th:href="@{/promotion/{id}/edit(id=${promotion.id})}" class="btn btn-warning btn-sm">‚úèÔ∏è S·ª≠a</a>
                <form th:action="@{/promotion/{id}/delete(id=${promotion.id})}" method="post"
                      th:id="'deleteForm-' + ${promotion.id}" class="d-inline">
                    <button type="submit" class="btn btn-danger btn-sm"
                            onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a khuy·∫øn m√£i n√†y?');">üóëÔ∏è X√≥a</button>
                </form>
            </td>
        </tr>
        <tr id="noResultsRow" style="display: none;">
            <td colspan="8" class="text-center text-danger">Kh√¥ng t√¨m th·∫•y khuy·∫øn m√£i n√†o ph√π h·ª£p.</td>
        </tr>
        </tbody>
    </table>

    <a th:href="@{/home}" class="btn btn-secondary">üîô Quay l·∫°i</a>
    <a th:href="@{/promotion/new}" class="btn btn-success float-end">‚ûï Th√™m khuy·∫øn m√£i</a>
</div>
</body>
</html>