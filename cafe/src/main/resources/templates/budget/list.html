<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title>Danh s√°ch Thu Chi</title>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">
<div layout:fragment="content" class="max-w-4xl mx-auto mt-8 p-6 bg-white rounded shadow">

    <h2 class="text-2xl font-bold mb-6 text-blue-600">üìä Danh s√°ch Thu Chi</h2>

    <!-- Form l·ªçc ng√†y -->
    <form th:action="@{/budget/list}" method="get" class="flex flex-wrap gap-4 mb-6 items-end">
        <div>
            <label class="block font-medium mb-1">T·ª´ ng√†y:</label>
            <input type="date" name="fromDate" th:value="${filter.fromDate}"
                   class="border px-3 py-2 rounded w-full" />
        </div>
        <div>
            <label class="block font-medium mb-1">ƒê·∫øn ng√†y:</label>
            <input type="date" name="toDate" th:value="${filter.toDate}"
                   class="border px-3 py-2 rounded w-full" />
        </div>
        <div>
            <button type="submit"
                    class="mt-6 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">Xem</button>
        </div>
    </form>

    <!-- B·∫£ng thu chi -->
    <div class="overflow-x-auto">
        <table class="min-w-full table-auto border border-gray-300 rounded">
            <thead class="bg-gray-200 text-gray-700">
                <tr>
                    <th class="py-2 px-4 text-left border">üìÖ Ng√†y</th>
                    <th class="py-2 px-4 text-right border">üì• Thu (VNƒê)</th>
                    <th class="py-2 px-4 text-right border">üì§ Chi (VNƒê)</th>
                </tr>
            </thead>
            <tbody>
                <tr th:if="${#lists.isEmpty(budgetPage.content)}">
                    <td colspan="3" class="py-4 px-4 text-center text-gray-500">Kh√¥ng c√≥ d·ªØ li·ªáu</td>
                </tr>
                <tr th:each="item : ${budgetPage.content}" class="border-t hover:bg-gray-50">
                    <td class="py-2 px-4 border" th:text="${item.date}">2025-06-01</td>
                    <td class="py-2 px-4 text-right border" th:text="${item.formattedIncome}">0</td>
                    <td class="py-2 px-4 text-right border" th:text="${item.formattedExpense}">0</td>
                </tr>
            </tbody>
            <tfoot class="font-semibold bg-gray-100">
                <tr class="border-t">
                    <td class="py-2 px-4 border">T·ªïng</td>
                    <td class="py-2 px-4 text-right border" th:text="${totalIncomeText}">0</td>
                    <td class="py-2 px-4 text-right border" th:text="${totalExpenseText}">0</td>
                </tr>
            </tfoot>
        </table>
    </div>

    <!-- Ph√¢n trang -->
    <div th:if="${budgetPage.totalPages > 1}" class="mt-6">
        <span class="font-semibold mr-2">Trang:</span>
        <span class="inline-flex gap-2">
            <a th:each="i : ${#numbers.sequence(0, budgetPage.totalPages - 1)}"
               th:href="@{/budget/list(fromDate=${filter.fromDate}, toDate=${filter.toDate}, page=${i})}"
               th:text="${i + 1}"
               th:classappend="${i == budgetPage.number} ? 'font-bold text-blue-600 underline' : 'text-gray-700 hover:underline'">
                1
            </a>
        </span>
    </div>

    <!-- Th√™m kho·∫£n chi -->
    <div class="mt-6">
        <a th:href="@{/budget/add}"
           class="inline-block bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">
            ‚ûï Th√™m kho·∫£n chi
        </a>
    </div>
</div>
</body>
</html>
