<!DOCTYPE html>
<html
  lang="vi"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout}"
>
  <head>
    <title>Đặt bàn - Hub Cafe</title>
    <style>
      .reservation-content {
        background: linear-gradient(135deg, #fefae0 0%, #f6e7cb 100%);
        padding: 2rem;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .table-selected {
        background-color: #e3f2fd !important;
        border: 3px solid #1976d2 !important;
        transform: scale(1.05);
        box-shadow: 0 8px 16px rgba(25, 118, 210, 0.3);
      }
    </style>
  </head>
  <body>
    <div class="flex flex-col">
      <!-- Main Content -->
      <main class="w-full">
        <div layout:fragment="content" class="reservation-content">
          <!-- Fragment form đặt bàn cho sales.html hoặc dùng riêng lẻ -->
          <div th:fragment="reservationForm">
            <div class="max-w-xl w-full">
    <div
      class="form-container bg-white/90 p-8 rounded-2xl shadow-2xl border border-[#b5c99a] relative"
    >
      <div
        class="absolute -top-8 left-1/2 -translate-x-1/2 bg-gradient-to-tr from-[#b5c99a] to-[#f6e7cb] rounded-full shadow-lg p-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-12 w-12 text-[#3e2723]"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M8 17l4 4 4-4m0-5V3m-8 4v4a4 4 0 004 4h4"
          />
        </svg>
      </div>
      <h3
        class="text-3xl font-extrabold mb-6 text-center tracking-tight"
        style="color: #3e2723"
      >
        Đặt bàn
      </h3>
      <form
        th:action="@{/sale/reservations}"
        th:object="${reservation}"
        method="post"
        class="space-y-6"
        id="reservation-form"
      >
        <!-- Hidden field để truyền tableId -->
        <input type="hidden" th:field="*{tableId}" />

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label
              for="customerName"
              class="block text-base font-semibold text-[#3e2723] mb-1"
            >
              Khách hàng
            </label>
            <input
              type="text"
              th:field="*{customerName}"
              id="customerName"
              required
              class="mt-1 block w-full rounded-lg border border-[#b5c99a] bg-[#f6e7cb] shadow-sm focus:border-[#3e2723] focus:ring-[#b5c99a] text-base placeholder:text-gray-400 px-3 py-2"
              placeholder="Nhập tên khách hàng"
            />
            <p
              class="text-red-500 text-sm mt-1 min-h-[20px]"
              th:if="${#fields.hasErrors('customerName')}"
              th:errors="*{customerName}"
            ></p>
          </div>
          <div>
            <label
              for="customerPhone"
              class="block text-base font-semibold text-[#3e2723] mb-1"
            >
              Số điện thoại
            </label>
            <input
              type="text"
              th:field="*{customerPhone}"
              id="customerPhone"
              required
              class="mt-1 block w-full rounded-lg border border-[#b5c99a] bg-[#f6e7cb] shadow-sm focus:border-[#3e2723] focus:ring-[#b5c99a] text-base placeholder:text-gray-400 px-3 py-2"
              placeholder="Nhập số điện thoại"
            />
            <p
              class="text-red-500 text-sm mt-1 min-h-[20px]"
              th:if="${#fields.hasErrors('customerPhone')}"
              th:errors="*{customerPhone}"
            ></p>
          </div>
          <div class="md:col-span-2">
            <label
              for="reservationDate"
              class="block text-base font-semibold text-[#3e2723] mb-1"
            >
              Ngày
            </label>
            <input
              type="datetime-local"
              th:field="*{reservationDate}"
              id="reservationDate"
              required
              class="mt-1 block w-full rounded-lg border border-[#b5c99a] bg-[#f6e7cb] shadow-sm focus:border-[#3e2723] focus:ring-[#b5c99a] text-base px-3 py-2"
            />
            <p
              class="text-red-500 text-sm mt-1 min-h-[20px]"
              th:if="${#fields.hasErrors('reservationDate')}"
              th:errors="*{reservationDate}"
            ></p>
          </div>
        </div>
        <div class="flex justify-end mt-8 space-x-4">
          <button
            type="submit"
            class="bg-gradient-to-tr from-[#3e2723] to-[#b5c99a] text-white px-6 py-2 rounded-lg font-semibold shadow hover:scale-105 hover:from-[#5d4037] hover:to-[#b5c99a] transition-all duration-200"
          >
            Đặt bàn
          </button>
          <a
            href="/sale"
            class="bg-gray-400 hover:bg-gray-500 text-white px-6 py-2 rounded-lg font-semibold shadow transition-all duration-200"
            >Hủy</a
          >
        </div>
      </form>

      <!-- Script để set datetime default value -->
      <script>
        document.addEventListener('DOMContentLoaded', function () {
          const reservationDateInput = document.getElementById('reservationDate');
          if (reservationDateInput && !reservationDateInput.value) {
            // Set default datetime to current time + 1 hour
            const now = new Date();
            now.setHours(now.getHours() + 1);
            const formattedDateTime = now.toISOString().slice(0, 16);
            reservationDateInput.value = formattedDateTime;
          }
        });
      </script>

      <!-- Khu vực hiển thị popup thông báo -->
      <div id="notification-area" class="mt-8 flex justify-center">
        <!-- Popup cảnh báo/thành công sẽ được hiển thị ở đây -->
      </div>
    </div>
          </div>
        </div>
      </main>
    </div>
  </body>
</html>

<style>
  .form-container {
    box-shadow: 0 8px 32px 0 rgba(34, 60, 80, 0.2);
    border: 1.5px solid #b5c99a;
  }
  input:focus {
    outline: none;
    border-color: #3e2723;
    box-shadow: 0 0 0 2px #b5c99a33;
  }
  label {
    letter-spacing: 0.01em;
  }
  @media (max-width: 640px) {
    .form-container {
      padding: 1.5rem;
    }
    .reservation-content {
      padding: 0.5rem !important;
    }
  }
</style>
