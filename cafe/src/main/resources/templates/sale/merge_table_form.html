<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout}">
<head>
    <title>G·ªôp b√†n</title>
</head>
<body>
<main layout:fragment="content">
    <div class="container">
        <h2 class="mb-4">ü™ë G·ªôp b√†n</h2>

        <!-- Th√¥ng b√°o -->
        <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
        <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

        <!-- Form g·ªôp b√†n -->
        <form th:action="@{/sale/merge}" method="post" onsubmit="return validateMergeForm()"
              class="border p-4 bg-white shadow rounded-3">

            <!-- Ch·ªçn b√†n ƒë√≠ch -->
            <div class="mb-3">
                <label for="targetTableId" class="form-label fw-semibold">Ch·ªçn b√†n ƒë√≠ch:</label>
                <select name="targetTableId" id="targetTableId" class="form-select" required>
                    <option value="">-- Ch·ªçn b√†n --</option>
                    <option th:each="table : ${tables}"
                            th:value="${table.id}"
                            th:text="${table.tableName}"></option>
                </select>
            </div>

            <!-- Ch·ªçn c√°c b√†n c·∫ßn g·ªôp -->
            <div class="mb-3">
                <label class="form-label fw-semibold">Ch·ªçn c√°c b√†n c·∫ßn g·ªôp v√†o:</label>
                <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-2">
                    <div th:each="table : ${tables}">
                        <div class="form-check">
                            <input class="form-check-input"
                                   type="checkbox"
                                   name="sourceTableIds"
                                   th:value="${table.id}"
                                   th:id="'table_' + ${table.id}" />
                            <label class="form-check-label" th:for="'table_' + ${table.id}"
                                   th:text="${table.tableName}">B√†n</label>
                        </div>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-success mt-3">üîó G·ªôp b√†n</button>
        </form>

        <div class="mt-4">
            <a href="/sale" class="btn btn-outline-secondary">‚Üê Quay l·∫°i danh s√°ch b√†n</a>
        </div>
    </div>
</main>
</body>
</html>
