<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Danh s√°ch thi·∫øt b·ªã</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <script th:src="@{/js/table-search.js}"></script>
</head>
<body>
<div layout:fragment="content" class="container mt-5">
    <h2 class="mb-4">üìã Danh s√°ch thi·∫øt b·ªã</h2>

    <div class="mb-3">
        <input type="text" id="searchInput"
               class="form-control"
               placeholder="üîç T√¨m theo t√™n thi·∫øt b·ªã..."
               onkeyup="filterTable('searchInput', 'equipmentTableBody', [1])" />
    </div>

    <table class="table table-bordered table-hover">
        <thead class="table-light">
        <tr>
            <th>ID</th>
            <th>T√™n thi·∫øt b·ªã</th>
            <th>S·ªë l∆∞·ª£ng</th>
            <th>Ng√†y mua</th>
            <th>Gi√° mua</th>
            <th>Ghi ch√∫</th>
            <th>Thao t√°c</th>
        </tr>
        </thead>
        <tbody id="equipmentTableBody">
        <tr th:each="equipment : ${equipments}">
            <td th:text="${equipment.id}">1</td>
            <td th:text="${equipment.equipmentName}">M√°y in</td>
            <td th:text="${equipment.quantity}">5</td>
            <td th:text="${#temporals.format(equipment.purchaseDate, 'dd/MM/yyyy')}">01/01/2025</td>
            <td th:text="${#numbers.formatDecimal(equipment.purchasePrice, 0, 'POINT', 0, 'COMMA')} + ' VND'">10.000 VND</td>
            <td th:text="${equipment.notes}">Ghi ch√∫</td>
            <td>
                <a th:href="@{/equipment/edit/{id}(id=${equipment.id})}" class="btn btn-warning btn-sm">‚úèÔ∏è S·ª≠a</a>
                <form th:action="@{/equipment/delete/{id}(id=${equipment.id})}" method="post"
                      th:id="'deleteForm-' + ${equipment.id}" class="d-inline">
                    <button type="submit" class="btn btn-danger btn-sm"
                            onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a thi·∫øt b·ªã n√†y?');">üóëÔ∏è X√≥a</button>
                </form>
            </td>
        </tr>
        <tr id="noResultsRow" style="display: none;">
            <td colspan="7" class="text-center text-danger">Kh√¥ng t√¨m th·∫•y thi·∫øt b·ªã n√†o ph√π h·ª£p.</td>
        </tr>
        </tbody>
    </table>

    <a th:href="@{/home}" class="btn btn-secondary">üîô Quay l·∫°i</a>
    <a th:href="@{/equipment/new}" class="btn btn-success float-end">‚ûï Th√™m thi·∫øt b·ªã</a>
</div>
</body>
</html>
