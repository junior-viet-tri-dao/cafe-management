<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Trang Danh S√°ch ƒê∆°n Nh·∫≠p</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        }
        /* T√πy ch·ªânh chi·ªÅu r·ªông c·ªôt cho giao di·ªán desktop */
        .grid-cols-custom {
            grid-template-columns: 1fr 2fr 1.5fr 1fr 1fr 1.5fr 1fr;
        }

        /* ·∫®n ti√™u ƒë·ªÅ c·ªôt v√† chuy·ªÉn sang d·∫°ng th·∫ª tr√™n mobile */
        @media (max-width: 767px) {
            .table-header {
                display: none;
            }
            .table-row {
                border: 1px solid #e5e7eb;
                border-radius: 0.5rem;
                padding: 1rem;
                background-color: white;
            }
            /* ƒê√£ lo·∫°i b·ªè .table-cell::before v√¨ ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng c·∫•u tr√∫c div m·ªõi */
        }
    </style>
</head>
<body class="p-6 font-sans bg-gray-50 text-gray-800">

<div layout:fragment="content">

    <form method="get" th:action="@{/warehouse/list_import}" class="flex items-center gap-2 mb-4 w-full">
        <input type="text" name="keyword" placeholder="T√¨m theo S·ªë l∆∞·ª£ng"
               th:value="${param.keyword}" class="px-3 py-2 border border-gray-300 rounded-md text-sm w-full sm:w-72">
        <button type="submit"
                class="bg-green-600 hover:bg-green-700 text-white text-sm font-semibold px-4 py-2 rounded-md shadow transition">
            üîç T√¨m
        </button>
    </form>

    <div class="mb-4 text-sm text-gray-600 italic" th:if="${param.keyword}">
        ƒêang t√¨m v·ªõi S·ªë l∆∞·ª£ng: "<span th:text="${param.keyword}"></span>"
    </div>

    <a th:href="@{/warehouse/insert_import}" class="text-blue-600 hover:underline inline-block mb-4">Th√™m ƒê∆°n Nh·∫≠p</a>

    <div class="max-w-6xl mx-auto w-full">
        <div class="overflow-x-auto shadow border border-gray-200 rounded-lg">
            <div class="min-w-full divide-y divide-gray-200">
                <div class="table-header hidden md:grid grid-cols-custom gap-4 bg-gray-100 font-semibold text-sm uppercase tracking-wide text-gray-700">
                    <div class="px-4 py-3 cursor-pointer hover:bg-gray-200" data-sort-by="id">
                        Id ƒê∆°n Nh·∫≠p <span class="sort-arrow inline-block ml-1"></span>
                    </div>
                    <div class="px-4 py-3 cursor-pointer hover:bg-gray-200" data-sort-by="productName">
                        T√™n h√†ng ho√°<span class="sort-arrow inline-block ml-1"></span>
                    </div>
                    <div class="px-4 py-3 cursor-pointer hover:bg-gray-200" data-sort-by="importDate">
                        Ng√†y nh·∫≠p <span class="sort-arrow inline-block ml-1"></span>
                    </div>
                    <div class="px-4 py-3 cursor-pointer text-right hover:bg-gray-200" data-sort-by="quantity">
                        S·ªë l∆∞·ª£ng <span class="sort-arrow inline-block ml-1"></span>
                    </div>
                    <div class="px-4 py-3 cursor-pointer text-right hover:bg-gray-200" data-sort-by="price">
                        ƒê∆°n gi√°<span class="sort-arrow inline-block ml-1"></span>
                    </div>
                    <div class="px-4 py-3 cursor-pointer text-right hover:bg-gray-200" data-sort-by="totalAmount">
                        T·ªïng ti·ªÅn<span class="sort-arrow inline-block ml-1"></span>
                    </div>
                    <div class="px-4 py-3">Action</div>
                </div>

                <div th:each="import : ${imports.importPage}" class="hidden md:grid grid-cols-custom gap-4 items-center border-t border-gray-200 hover:bg-gray-50">
                    <div class="px-4 py-3" th:text="${import.id}"></div>
                    <div class="px-4 py-3" th:text="${import.product.productName}"></div>
                    <div class="px-4 py-3" th:text="${#temporals.format(import.importDate, 'dd/MM/yyyy')}"></div>
                    <div class="px-4 py-3 text-right" th:text="${import.quantity}"></div>
                    <div class="px-4 py-3 text-right" th:text="${import.price}"></div>
                    <div class="px-4 py-3 text-right" th:text="${import.totalAmount}"></div>
                    <div class="px-4 py-3 space-x-2">
                    </div>
                </div>

                <div class="md:hidden flex flex-col space-y-4 p-4">
                    <div th:each="import : ${imports.importPage}" class="table-row flex flex-col gap-2 bg-white rounded-lg shadow-md border-gray-200">
                        <div class="flex flex-col">
                            <span class="font-semibold text-gray-600">Id ƒê∆°n Nh·∫≠p:</span>
                            <span th:text="${import.id}"></span>
                        </div>
                        <div class="flex flex-col">
                            <span class="font-semibold text-gray-600">T√™n h√†ng ho√°:</span>
                            <span th:text="${import.product.productName}"></span>
                        </div>
                        <div class="flex flex-col">
                            <span class="font-semibold text-gray-600">Ng√†y nh·∫≠p:</span>
                            <span th:text="${#temporals.format(import.importDate, 'dd/MM/yyyy')}"></span>
                        </div>
                        <div class="flex flex-col">
                            <span class="font-semibold text-gray-600">S·ªë l∆∞·ª£ng:</span>
                            <span th:text="${import.quantity}"></span>
                        </div>
                        <div class="flex flex-col">
                            <span class="font-semibold text-gray-600">ƒê∆°n gi√°:</span>
                            <span th:text="${import.price}"></span>
                        </div>
                        <div class="flex flex-col">
                            <span class="font-semibold text-gray-600">T·ªïng ti·ªÅn:</span>
                            <span th:text="${import.totalAmount}"></span>
                        </div>
                        <div class="mobile-actions">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex items-center justify-between mt-8">
            <div class="text-sm text-gray-600" th:if="${imports.totalPages > 0}">
                <span th:text="'Trang ' + (${imports.pageNumber + 1}) + ' / ' + ${imports.totalPages}">Trang 1 / 5</span> |
                <span th:text="'T·ªïng: ' + ${imports.totalElements} + ' ƒë∆°n nh·∫≠p'">T·ªïng: 25 nh√¢n vi√™n</span>
            </div>

            <nav>
                <ul class="inline-flex items-center space-x-1">
                    <li>
                        <a th:href="@{/warehouse/list_import(page=${imports.pageNumber - 1}, keyword=${param.keyword})}"
                           th:class="'flex items-center px-3 py-2 rounded-lg border text-sm transition ' + (${imports.pageNumber == 0} ? 'text-gray-300 border-gray-300 bg-gray-100 cursor-not-allowed pointer-events-none' : 'text-blue-600 border-blue-300 hover:bg-blue-50')">
                            ‚óÄ Tr∆∞·ªõc
                        </a>
                    </li>

                    <li th:if="${imports.totalPages > 0}"
                        th:each="pageNum : ${#numbers.sequence(0, imports.totalPages - 1)}">
                        <a th:href="@{/warehouse/list_import(page=${pageNum}, keyword=${param.keyword})}"
                           th:text="${pageNum + 1}"
                           th:class="'px-3 py-2 rounded-lg border text-sm font-medium transition ' +
                             (${pageNum} == ${imports.pageNumber}
                             ? 'bg-blue-600 text-white border-blue-600'
                             : 'border-gray-300 text-gray-700 hover:bg-blue-50')">
                        </a>
                    </li>

                    <li>
                        <a th:href="@{/warehouse/list_import(page=${imports.pageNumber + 1}, keyword=${param.keyword})}"
                           th:class="'flex items-center px-3 py-2 rounded-lg border text-sm transition ' + (${imports.pageNumber + 1 >= imports.totalPages} ? 'text-gray-300 border-gray-300 bg-gray-100 cursor-not-allowed pointer-events-none' : 'text-blue-600 border-blue-300 hover:bg-blue-50')">
                            Ti·∫øp ‚ñ∂
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>

</body>
</html>