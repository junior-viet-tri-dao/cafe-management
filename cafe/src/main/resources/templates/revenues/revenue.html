<!DOCTYPE html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title layout:fragment="title">üìä Xem Thu Chi</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for better mobile experience */
        @media (max-width: 767px) { /* Small devices (phones, 767px and below) */
            .container-wrapper { /* Refers to the div with layout:fragment="content" */
                padding: 1rem; /* Reduce overall padding on mobile */
            }

            .max-w-4xl {
                max-width: 100%; /* Allow container to take full width on small screens */
                border-radius: 0; /* Optional: remove border-radius for full-width look */
                box-shadow: none; /* Optional: remove shadow on mobile */
            }

            .grid.grid-cols-1.md\:grid-cols-3 {
                grid-template-columns: 1fr; /* Stack form elements vertically */
                gap: 1rem; /* Adjust gap for stacked elements */
            }

            .form-label {
                font-size: 0.9rem; /* Slightly smaller font for labels */
            }

            .px-4.py-2 {
                padding: 0.5rem 0.75rem; /* Reduce padding for inputs/buttons */
            }

            /* Table specific adjustments for mobile */
            .overflow-x-auto {
                -webkit-overflow-scrolling: touch; /* Smooth scrolling for iOS */
            }

            .min-w-full {
                width: 100%; /* Ensure table takes full width of its container */
                table-layout: fixed; /* Force table to respect column widths */
            }

            .min-w-full th,
            .min-w-full td {
                padding: 0.75rem 0.5rem; /* Reduce padding in table cells */
                font-size: 0.85rem; /* Slightly smaller font for table content */
                word-wrap: break-word; /* Allow long words to break and wrap */
                width: 33.33%; /* Distribute width equally among 3 columns */
            }

            .text-3xl {
                font-size: 2rem; /* Adjust heading size for mobile */
            }
        }
    </style>
</head>
<body class="bg-[#fefae0] min-h-screen">
<div layout:fragment="content" class="w-full flex justify-center py-10 px-4 container-wrapper">
    <div class="w-full max-w-4xl bg-white rounded-xl shadow-lg p-6">
        <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center flex items-center gap-2 justify-center">
            üìä Xem Thu Chi
        </h2>

        <!-- Form l·ªçc theo ng√†y -->
        <form action="/revenue" method="get" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div>
                <label for="startDate" class="block text-gray-700 font-medium mb-1 form-label">T·ª´ ng√†y</label>
                <input type="date" id="startDate" name="startDate"
                       th:value="${filter.startDate != null ? #temporals.format(filter.startDate, 'yyyy-MM-dd') : ''}"
                       class="w-full border border-gray-300 rounded-md px-4 py-2 focus:ring focus:ring-blue-300 outline-none"/>
            </div>
            <div>
                <label for="endDate" class="block text-gray-700 font-medium mb-1 form-label">ƒê·∫øn ng√†y</label>
                <input type="date" id="endDate" name="endDate"
                       th:value="${filter.endDate != null ? #temporals.format(filter.endDate, 'yyyy-MM-dd') : ''}"
                       class="w-full border border-gray-300 rounded-md px-4 py-2 focus:ring focus:ring-blue-300 outline-none"/>
            </div>
            <div class="flex items-end">
                <button type="submit"
                        class="w-full bg-green-600 hover:bg-green-700 text-white font-medium px-4 py-2 rounded-md shadow transition">
                    üîç Xem
                </button>
            </div>
        </form>

        <!-- B·∫£ng d·ªØ li·ªáu -->
        <div class="overflow-x-auto">
            <table class="min-w-full border border-gray-300 rounded-lg overflow-hidden">
                <thead class="bg-gray-100">
                <tr>
                    <th class="px-4 py-2 text-center text-gray-700 font-semibold">üìÖ Ng√†y</th>
                    <th class="px-4 py-2 text-center text-gray-700 font-semibold">üí∞ Thu</th>
                    <th class="px-4 py-2 text-center text-gray-700 font-semibold">üí∏ Chi</th>
                </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                <tr th:if="${revenue != null}" th:each="item : ${revenue.summaries}">
                    <td class="px-4 py-2 text-center" th:text="${#temporals.format(item.date, 'dd/MM/yyyy')}">__/__/____</td>
                    <td class="px-4 py-2 text-center text-green-600 font-medium"
                        th:text="${#numbers.formatDecimal(item.income ?: 0, 0, 'POINT', 0, 'COMMA')} + ' VND'">0</td>
                    <td class="px-4 py-2 text-center text-red-600 font-medium"
                        th:text="${#numbers.formatDecimal(item.expense ?: 0, 0, 'POINT', 0, 'COMMA')} + ' VND'">0</td>
                </tr>
                <tr th:if="${revenue != null}" class="bg-gray-50 font-semibold">
                    <td class="px-4 py-2 text-center">T·ªïng</td>
                    <td class="px-4 py-2 text-center text-green-700"
                        th:text="${#numbers.formatDecimal(revenue.totalIncome ?: 0, 0, 'POINT', 0, 'COMMA')} + ' VND'">0</td>
                    <td class="px-4 py-2 text-center text-red-700"
                        th:text="${#numbers.formatDecimal(revenue.totalExpense ?: 0, 0, 'POINT', 0, 'COMMA')} + ' VND'">0</td>
                </tr>
                <tr th:if="${revenue == null}">
                    <td colspan="3" class="px-4 py-3 text-center text-gray-500">
                        Kh√¥ng c√≥ d·ªØ li·ªáu trong kho·∫£ng th·ªùi gian ƒë√£ ch·ªçn.
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
