<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
      
<head>
      <script th:src="@{/js/alert-utils.js}"></script>

    <meta charset="UTF-8">
    <title>Danh sách nhân viên</title>
</head>
<body>
<div layout:fragment="content" class="container mx-auto mt-8">

    <h2 class="text-2xl font-bold text-yellow-800 mb-4">📋 Danh sách nhân viên</h2>

    <!-- ✅ Thông báo hệ thống -->
    <div th:if="${error}" class="text-red-600 font-semibold mb-3" th:text="${error}"></div>
    <div th:if="${success}" class="text-green-600 font-semibold mb-3" th:text="${success}"></div>

    <!-- 🔍 Form tìm kiếm -->
    <form th:action="@{/employee/search}" method="get" class="mb-4">
        <input type="text" name="keyword" th:value="${keyword}" placeholder="Tìm theo tên, chức vụ, hoặc lương"
               class="border px-3 py-2 rounded w-1/3"/>
        <button type="submit" class="bg-yellow-500 text-white px-4 py-2 rounded">🔍 Tìm</button>
    </form>

    <!-- ➕ Nút thêm nhân viên -->
    <div class="mb-4 text-right">
        <a th:href="@{/employee/add}" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded shadow">
            ➕ Thêm nhân viên
        </a>
    </div>

    <!-- 📄 Bảng danh sách nhân viên -->
    <table class="w-full border border-collapse text-sm">
        <thead>
        <tr class="bg-yellow-100 text-left">
            <th class="border px-3 py-2">Họ và tên</th>
            <th class="border px-3 py-2">Chức vụ</th>
            <th class="border px-3 py-2">Lương</th>
            <th class="border px-3 py-2">Hành động</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="emp : ${employees}" class="hover:bg-gray-50">
            <td class="border px-3 py-2" th:text="${emp.fullName}"></td>
            <td class="border px-3 py-2" th:text="${emp.position}"></td>
            <td class="border px-3 py-2"
                th:text="${#numbers.formatDecimal(emp.salary, 0, 'POINT', 0, 'COMMA')} + ' VNĐ'"></td>
            <td class="border px-3 py-2 space-x-2">
                <a th:href="@{'/employee/edit/' + ${emp.id}}" class="text-blue-600 hover:underline">✏ Sửa</a>
                <form th:action="@{'/employee/delete/' + ${emp.id}}" method="post" style="display:inline;">
                    <button type="submit" onclick="return confirm('Bạn có chắc muốn xóa?')"
                            class="text-red-600 hover:underline">🗑 Xóa</button>
                </form>
            </td>
        </tr>
        <tr th:if="${employees.isEmpty()}">
            <td colspan="4" class="text-center text-gray-500 py-4">Không có nhân viên nào phù hợp.</td>
        </tr>
        </tbody>
    </table>
</div>
<div th:replace="~{/alert :: alerts}"></div>
</body>
</html>
