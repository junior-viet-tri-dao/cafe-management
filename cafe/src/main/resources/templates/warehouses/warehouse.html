<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout}"
>
  <head>
    <meta charset="UTF-8" />
    <title>Qu·∫£n l√Ω kho h√†ng</title>
    <style>
      /* Smooth transition for tab content */
      .tab-content {
        transition: opacity 0.3s ease-in-out;
      }

      /* Hover effects for buttons */
      .hover-lift {
        transition: transform 0.2s ease-in-out;
      }

      .hover-lift:hover {
        transform: translateY(-2px);
      }

      /* Badge animation */
      .badge-animate {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }
    </style>
  </head>
  <body>
    <div
      layout:fragment="content"
      class="bg-[#fefae0] min-h-screen w-full px-6 py-8"
    >
      <div class="max-w-[1500px] mx-auto">
        <div class="bg-white rounded-xl shadow-lg p-6">
          <!-- Tabs -->
          <div class="flex gap-4 mb-8">
            <button
              id="tab-products"
              type="button"
              class="tab-btn px-8 py-3 rounded-xl text-2xl font-bold border-2 transition-all duration-300 ease-in-out focus:outline-none bg-blue-600 border-blue-600 text-white shadow-lg transform hover:scale-105"
            >
              H√†ng H√≥a
            </button>
            <button
              id="tab-transactions"
              type="button"
              class="tab-btn px-8 py-3 rounded-xl text-2xl font-bold border-2 transition-all duration-300 ease-in-out focus:outline-none bg-white border-green-500 text-green-700 shadow-lg transform hover:scale-105"
            >
              Giao D·ªãch Nh·∫≠p Xu·∫•t
            </button>
          </div>

          <!-- Products Section -->
          <div
            id="products-section"
            class="tab-content transition-all duration-300 ease-in-out"
          >
            <!-- Ti√™u ƒë·ªÅ + n√∫t th√™m -->
            <div class="flex items-center justify-between mb-6">
              <h2 class="text-3xl font-bold text-[#3e2723]">
                Danh s√°ch h√†ng h√≥a
              </h2>
              <a
                th:href="@{/warehouse/product/create}"
                class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition-colors duration-200 hover-lift"
              >
                Th√™m h√†ng h√≥a
              </a>
            </div>

            <!-- Form t√¨m ki·∫øm -->
            <div class="mb-6">
              <form
                th:action="@{/warehouse/product}"
                method="get"
                class="flex gap-3"
              >
                <div class="flex-1 relative">
                  <input
                    type="text"
                    name="keyword"
                    id="searchProductInput"
                    th:value="${param.keyword}"
                    placeholder="T√¨m ki·∫øm theo t√™n h√†ng h√≥a..."
                    class="w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
                  />
                  <!-- N√∫t X ƒë·ªÉ x√≥a -->
                  <button
                    type="button"
                    id="clearProductBtn"
                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition"
                    style="display: none"
                  >
                    ‚úï
                  </button>
                </div>
                <button
                  type="submit"
                  class="bg-green-600 hover:bg-green-700 text-white font-medium px-6 py-2 rounded-lg shadow transition"
                >
                  üîç T√¨m ki·∫øm
                </button>
              </form>
              <!-- Breadcrumb khi ƒëang t√¨m ki·∫øm -->
              <div
                th:if="${param.keyword != null and param.keyword[0] != null and !param.keyword[0].isEmpty()}"
                class="mt-2"
              >
                <span class="text-sm text-gray-600">
                  K·∫øt qu·∫£ t√¨m ki·∫øm cho: "<span
                    th:text="${param.keyword[0]}"
                    class="font-semibold text-blue-600"
                  ></span
                  >" ‚Ä¢
                  <a
                    th:href="@{/warehouse/product}"
                    class="text-blue-600 hover:text-blue-800 underline"
                    >Xem t·∫•t c·∫£ h√†ng h√≥a</a
                  >
                </span>
              </div>
            </div>
            <!-- B·∫£ng danh s√°ch h√†ng h√≥a -->
            <div
              class="overflow-x-auto border border-gray-300 rounded-xl shadow bg-white"
            >
              <table class="w-full text-sm text-gray-800 table-fixed">
                <thead
                  class="bg-[#FFF8E1] text-xs font-semibold text-gray-700 uppercase"
                >
                  <tr>
                    <th class="w-[30%] px-4 py-3 text-left">T√™n</th>
                    <th class="w-[20%] px-4 py-3 text-left">S·ªë l∆∞·ª£ng</th>
                    <th class="w-[20%] px-4 py-3 text-left">ƒê∆°n v·ªã</th>
                    <th class="w-[30%] px-4 py-3 text-center">Thao T√°c</th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                  <!-- D·ªØ li·ªáu ƒë·ªông t·ª´ backend -->
                  <tr
                    th:each="product, stat : ${products.products}"
                    class="hover:bg-[#f9f9f9] transition"
                  >
                    <td
                      class="px-4 py-3 font-medium"
                      th:text="${product.productName}"
                    ></td>
                    <td class="px-4 py-3" th:text="${product.quantity}"></td>
                    <td class="px-4 py-3" th:text="${product.unitName}"></td>
                    <td class="px-4 py-3">
                      <div class="flex justify-center gap-2">
                        <a
                          th:href="@{'/warehouse/product/update/' + ${product.id}}"
                          class="bg-yellow-400 hover:bg-yellow-500 text-white text-xs font-medium px-3 py-1.5 rounded shadow"
                        >
                          S·ª≠a
                        </a>
                        <form
                          th:action="@{/warehouse/product/delete/{id}(id=${product.id})}"
                          method="post"
                          th:id="'deleteForm-' + ${product.id}"
                        >
                          <button
                            type="button"
                            th:attr="data-id=${product.id},data-name=${product.productName}"
                            class="btn-delete bg-red-500 hover:bg-red-600 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition"
                          >
                            X√≥a
                          </button>
                        </form>
                      </div>
                    </td>
                  </tr>
                  <tr th:if="${products.products.size() == 0}">
                    <td colspan="4" class="text-center py-6 text-gray-400">
                      Kh√¥ng c√≥ h√†ng h√≥a n√†o.
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Ph√¢n trang cho h√†ng h√≥a -->
            <div
              class="flex items-center justify-between mt-6 text-sm text-gray-600"
            >
              <div>
                <span
                  >Trang <span th:text="${products.pageNumber + 1}"></span> /
                  <span th:text="${products.totalPages}"></span
                ></span>
                |
                <span
                  >T·ªïng: <span th:text="${products.totalElements}"></span> h√†ng
                  h√≥a</span
                >
              </div>
              <nav th:if="${products.totalPages > 1}">
                <ul class="inline-flex items-center gap-1">
                  <!-- Tr∆∞·ªõc -->
                  <li>
                    <a
                      th:if="${products.pageNumber == 0}"
                      href="#"
                      class="px-3 py-1.5 rounded border transition text-gray-300 border-gray-300 bg-gray-100 cursor-not-allowed pointer-events-none"
                      >Tr∆∞·ªõc</a
                    >
                    <a
                      th:if="${products.pageNumber > 0}"
                      th:href="@{/warehouse/product(page=${products.pageNumber - 1},keyword=${param.keyword})}"
                      class="px-3 py-1.5 rounded border transition text-gray-700 border-gray-300 bg-white hover:bg-gray-100"
                      >Tr∆∞·ªõc</a
                    >
                  </li>
                  <!-- Trang -->
                  <li
                    th:each="pageNum : ${#numbers.sequence(1, products.totalPages)}"
                  >
                    <a
                      th:href="@{/warehouse/product(page=${pageNum - 1},keyword=${param.keyword})}"
                      th:classappend="${products.pageNumber + 1 == pageNum} ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-100'"
                      class="px-3 py-1.5 rounded border text-sm font-medium transition"
                    >
                      <span th:text="${pageNum}"></span>
                    </a>
                  </li>
                  <!-- Ti·∫øp -->
                  <li>
                    <a
                      th:if="${products.pageNumber + 1 >= products.totalPages}"
                      href="#"
                      class="px-3 py-1.5 rounded border transition text-gray-300 border-gray-300 bg-gray-100 cursor-not-allowed pointer-events-none"
                      >Ti·∫øp</a
                    >
                    <a
                      th:if="${products.pageNumber + 1 < products.totalPages}"
                      th:href="@{/warehouse/product(page=${products.pageNumber + 1},keyword=${param.keyword})}"
                      class="px-3 py-1.5 rounded border transition text-gray-700 border-gray-300 bg-white hover:bg-gray-100"
                      >Ti·∫øp</a
                    >
                  </li>
                </ul>
              </nav>
            </div>
          </div>

          <!-- Transactions Section -->
          <div
            id="transactions-section"
            class="tab-content transition-all duration-300 ease-in-out opacity-0"
            style="display: none"
          >
            <!-- Ti√™u ƒë·ªÅ + n√∫t th√™m -->
            <div class="flex items-center justify-between mb-6">
              <h2 class="text-3xl font-bold text-[#3e2723]">
                Danh s√°ch Giao D·ªãch
              </h2>
              <div class="flex gap-2">
                <a
                  th:href="@{/warehouse/transaction/import/create}"
                  class="bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition-colors duration-200 hover-lift"
                >
                  üì¶ ƒê∆°n Nh·∫≠p
                </a>
                <a
                  th:href="@{/warehouse/transaction/export/create}"
                  class="bg-red-600 hover:bg-red-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition-colors duration-200 hover-lift"
                >
                  üì§ ƒê∆°n Xu·∫•t
                </a>
              </div>
            </div>

            <!-- Form t√¨m ki·∫øm -->
            <div class="mb-6">
              <form
                th:action="@{/warehouse/transactions}"
                method="get"
                class="flex gap-3"
              >
                <div class="flex-1 relative">
                  <input
                    type="text"
                    name="keyword"
                    id="searchTransactionInput"
                    th:value="${param.transactionKeyword}"
                    placeholder="T√¨m ki·∫øm theo t√™n h√†ng h√≥a ho·∫∑c lo·∫°i giao d·ªãch..."
                    class="w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
                  />
                  <!-- N√∫t X ƒë·ªÉ x√≥a -->
                  <button
                    type="button"
                    id="clearTransactionBtn"
                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition"
                    style="display: none"
                  >
                    ‚úï
                  </button>
                </div>
                <select
                  name="transactionType"
                  class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
                >
                  <option value="">T·∫•t c·∫£ lo·∫°i</option>
                  <option value="IMPORT">Nh·∫≠p</option>
                  <option value="EXPORT">Xu·∫•t</option>
                </select>
                <button
                  type="submit"
                  class="bg-green-600 hover:bg-green-700 text-white font-medium px-6 py-2 rounded-lg shadow transition-colors duration-200"
                >
                  üîç T√¨m ki·∫øm
                </button>
              </form>

              <!-- Breadcrumb khi ƒëang t√¨m ki·∫øm -->
              <div
                th:if="${param.transactionKeyword != null and param.transactionKeyword[0] != null and !param.transactionKeyword[0].isEmpty()}"
                class="mt-2"
              >
                <span class="text-sm text-gray-600">
                  K·∫øt qu·∫£ t√¨m ki·∫øm cho: "<span
                    th:text="${param.transactionKeyword[0]}"
                    class="font-semibold text-blue-600"
                  ></span
                  >" ‚Ä¢
                  <a
                    th:href="@{/warehouse/transactions}"
                    class="text-blue-600 hover:text-blue-800 underline"
                    >Xem t·∫•t c·∫£ giao d·ªãch</a
                  >
                </span>
              </div>
            </div>
            <!-- B·∫£ng danh s√°ch giao d·ªãch -->
            <div
              class="overflow-x-auto border border-gray-300 rounded-xl shadow bg-white"
            >
              <table class="w-full text-sm text-gray-800 table-fixed">
                <thead
                  class="bg-[#FFF8E1] text-xs font-semibold text-gray-700 uppercase"
                >
                  <tr>
                    <th class="w-[15%] px-4 py-3 text-left">T√™n</th>
                    <th class="w-[10%] px-4 py-3 text-left">Lo·∫°i</th>
                    <th class="w-[12%] px-4 py-3 text-left">Ng√†y</th>
                    <th class="w-[10%] px-4 py-3 text-left">S·ªë l∆∞·ª£ng</th>
                    <th class="w-[8%] px-4 py-3 text-left">ƒê∆°n v·ªã</th>
                    <th class="w-[12%] px-4 py-3 text-right">ƒê∆°n gi√°</th>
                    <th class="w-[13%] px-4 py-3 text-right">Th√†nh ti·ªÅn</th>
                    <th class="w-[20%] px-4 py-3 text-center">Thao T√°c</th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                  <!-- D·ªØ li·ªáu tƒ©nh cho demo -->
                  <tr class="hover:bg-[#f9f9f9] transition">
                    <td class="px-4 py-3 font-medium">S·ªØa</td>
                    <td class="px-4 py-3">
                      <span
                        class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800"
                      >
                        Nh·∫≠p
                      </span>
                    </td>
                    <td class="px-4 py-3">09/07/2025</td>
                    <td class="px-4 py-3">10</td>
                    <td class="px-4 py-3">kg</td>
                    <td class="px-4 py-3 text-right">50.000 ƒë</td>
                    <td class="px-4 py-3 text-right">500.000 ƒë</td>
                    <td class="px-4 py-3">
                      <div class="flex justify-center gap-2">
                        <a
                          href="#"
                          class="bg-yellow-400 hover:bg-yellow-500 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition-colors duration-200"
                        >
                          S·ª≠a
                        </a>
                        <form style="display: inline-block">
                          <button
                            type="button"
                            data-id="1"
                            data-name="S·ªØa"
                            class="btn-delete-transaction bg-red-500 hover:bg-red-600 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition-colors duration-200"
                          >
                            X√≥a
                          </button>
                        </form>
                      </div>
                    </td>
                  </tr>
                  <tr class="hover:bg-[#f9f9f9] transition">
                    <td class="px-4 py-3 font-medium">ƒê∆∞·ªùng</td>
                    <td class="px-4 py-3">
                      <span
                        class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-800"
                      >
                        Xu·∫•t
                      </span>
                    </td>
                    <td class="px-4 py-3">30/07/2025</td>
                    <td class="px-4 py-3">5</td>
                    <td class="px-4 py-3">g</td>
                    <td class="px-4 py-3 text-right">60.000 ƒë</td>
                    <td class="px-4 py-3 text-right">300.000 ƒë</td>
                    <td class="px-4 py-3">
                      <div class="flex justify-center gap-2">
                        <a
                          href="#"
                          class="bg-yellow-400 hover:bg-yellow-500 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition-colors duration-200"
                        >
                          S·ª≠a
                        </a>
                        <form style="display: inline-block">
                          <button
                            type="button"
                            data-id="2"
                            data-name="ƒê∆∞·ªùng"
                            class="btn-delete-transaction bg-red-500 hover:bg-red-600 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition-colors duration-200"
                          >
                            X√≥a
                          </button>
                        </form>
                      </div>
                    </td>
                  </tr>

                  <tr class="hover:bg-[#f9f9f9] transition">
                    <td class="px-4 py-3 font-medium">C√† ph√™</td>
                    <td class="px-4 py-3">
                      <span
                        class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800"
                      >
                        Nh·∫≠p
                      </span>
                    </td>
                    <td class="px-4 py-3">08/07/2025</td>
                    <td class="px-4 py-3">25</td>
                    <td class="px-4 py-3">kg</td>
                    <td class="px-4 py-3 text-right">80.000 ƒë</td>
                    <td class="px-4 py-3 text-right">2.000.000 ƒë</td>
                    <td class="px-4 py-3">
                      <div class="flex justify-center gap-2">
                        <a
                          href="#"
                          class="bg-yellow-400 hover:bg-yellow-500 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition-colors duration-200"
                        >
                          S·ª≠a
                        </a>
                        <form style="display: inline-block">
                          <button
                            type="button"
                            data-id="3"
                            data-name="C√† ph√™"
                            class="btn-delete-transaction bg-red-500 hover:bg-red-600 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition-colors duration-200"
                          >
                            X√≥a
                          </button>
                        </form>
                      </div>
                    </td>
                  </tr>

                  <tr class="hover:bg-[#f9f9f9] transition">
                    <td class="px-4 py-3 font-medium">B√°nh m√¨</td>
                    <td class="px-4 py-3">
                      <span
                        class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-800"
                      >
                        Xu·∫•t
                      </span>
                    </td>
                    <td class="px-4 py-3">07/07/2025</td>
                    <td class="px-4 py-3">15</td>
                    <td class="px-4 py-3">c√°i</td>
                    <td class="px-4 py-3 text-right">25.000 ƒë</td>
                    <td class="px-4 py-3 text-right">375.000 ƒë</td>
                    <td class="px-4 py-3">
                      <div class="flex justify-center gap-2">
                        <a
                          href="#"
                          class="bg-yellow-400 hover:bg-yellow-500 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition-colors duration-200"
                        >
                          S·ª≠a
                        </a>
                        <form style="display: inline-block">
                          <button
                            type="button"
                            data-id="4"
                            data-name="B√°nh m√¨"
                            class="btn-delete-transaction bg-red-500 hover:bg-red-600 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition-colors duration-200"
                          >
                            X√≥a
                          </button>
                        </form>
                      </div>
                    </td>
                  </tr>

                  <tr class="hover:bg-[#f9f9f9] transition">
                    <td class="px-4 py-3 font-medium">Ly gi·∫•y</td>
                    <td class="px-4 py-3">
                      <span
                        class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800"
                      >
                        Nh·∫≠p
                      </span>
                    </td>
                    <td class="px-4 py-3">06/07/2025</td>
                    <td class="px-4 py-3">200</td>
                    <td class="px-4 py-3">c√°i</td>
                    <td class="px-4 py-3 text-right">2.000 ƒë</td>
                    <td class="px-4 py-3 text-right">400.000 ƒë</td>
                    <td class="px-4 py-3">
                      <div class="flex justify-center gap-2">
                        <a
                          href="#"
                          class="bg-yellow-400 hover:bg-yellow-500 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition-colors duration-200"
                        >
                          S·ª≠a
                        </a>
                        <form style="display: inline-block">
                          <button
                            type="button"
                            data-id="5"
                            data-name="Ly gi·∫•y"
                            class="btn-delete-transaction bg-red-500 hover:bg-red-600 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition-colors duration-200"
                          >
                            X√≥a
                          </button>
                        </form>
                      </div>
                    </td>
                  </tr>

                  <tr class="hover:bg-[#f9f9f9] transition">
                    <td class="px-4 py-3 font-medium">Tr√† ƒë√°</td>
                    <td class="px-4 py-3">
                      <span
                        class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-800"
                      >
                        Xu·∫•t
                      </span>
                    </td>
                    <td class="px-4 py-3">05/07/2025</td>
                    <td class="px-4 py-3">3</td>
                    <td class="px-4 py-3">l√≠t</td>
                    <td class="px-4 py-3 text-right">30.000 ƒë</td>
                    <td class="px-4 py-3 text-right">90.000 ƒë</td>
                    <td class="px-4 py-3">
                      <div class="flex justify-center gap-2">
                        <a
                          href="#"
                          class="bg-yellow-400 hover:bg-yellow-500 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition-colors duration-200"
                        >
                          S·ª≠a
                        </a>
                        <form style="display: inline-block">
                          <button
                            type="button"
                            data-id="6"
                            data-name="Tr√† ƒë√°"
                            class="btn-delete-transaction bg-red-500 hover:bg-red-600 text-white text-xs font-medium px-3 py-1.5 rounded shadow transition-colors duration-200"
                          >
                            X√≥a
                          </button>
                        </form>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Ph√¢n trang cho giao d·ªãch -->
            <div
              class="flex items-center justify-between mt-6 text-sm text-gray-600"
            >
              <div class="flex items-center gap-4">
                <span>Trang 1 / 1</span>
                <span>T·ªïng: 6 giao d·ªãch</span>
                <div class="flex items-center gap-2">
                  <span class="text-green-600">‚óè 3 nh·∫≠p</span>
                  <span class="text-red-600">‚óè 3 xu·∫•t</span>
                </div>
              </div>
              <nav>
                <ul class="inline-flex items-center gap-1">
                  <!-- Tr∆∞·ªõc -->
                  <li>
                    <a
                      href="#"
                      class="px-3 py-1.5 rounded border transition text-gray-300 border-gray-300 bg-gray-100 cursor-not-allowed pointer-events-none"
                    >
                      Tr∆∞·ªõc
                    </a>
                  </li>

                  <!-- Trang -->
                  <li>
                    <a
                      href="#"
                      class="px-3 py-1.5 rounded border text-sm font-medium transition bg-blue-600 text-white border-blue-600"
                    >
                      1
                    </a>
                  </li>

                  <!-- Ti·∫øp -->
                  <li>
                    <a
                      href="#"
                      class="px-3 py-1.5 rounded border transition text-gray-300 border-gray-300 bg-gray-100 cursor-not-allowed pointer-events-none"
                    >
                      Ti·∫øp
                    </a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Tab switching logic
        const tabProducts = document.getElementById('tab-products');
        const tabTransactions = document.getElementById('tab-transactions');
        const productsSection = document.getElementById('products-section');
        const transactionsSection = document.getElementById(
          'transactions-section'
        );

        // Function to switch to products tab
        function switchToProductsTab() {
          // Fade out current section
          transactionsSection.style.opacity = '0';

          setTimeout(() => {
            // Hide transactions, show products
            transactionsSection.style.display = 'none';
            productsSection.style.display = 'block';

            // Fade in new section
            setTimeout(() => {
              productsSection.style.opacity = '1';
            }, 50);
          }, 150);

          // Update tab styles with smooth transition
          tabProducts.className =
            'tab-btn px-8 py-3 rounded-xl text-2xl font-bold border-2 transition-all duration-300 ease-in-out focus:outline-none bg-blue-600 border-blue-600 text-white shadow-lg transform hover:scale-105';

          tabTransactions.className =
            'tab-btn px-8 py-3 rounded-xl text-2xl font-bold border-2 transition-all duration-300 ease-in-out focus:outline-none bg-white border-green-500 text-green-700 shadow-lg transform hover:scale-105';
        }

        // Function to switch to transactions tab
        function switchToTransactionsTab() {
          // Fade out current section
          productsSection.style.opacity = '0';

          setTimeout(() => {
            // Hide products, show transactions
            productsSection.style.display = 'none';
            transactionsSection.style.display = 'block';

            // Fade in new section
            setTimeout(() => {
              transactionsSection.style.opacity = '1';
            }, 50);
          }, 150);

          // Update tab styles with smooth transition
          tabTransactions.className =
            'tab-btn px-8 py-3 rounded-xl text-2xl font-bold border-2 transition-all duration-300 ease-in-out focus:outline-none bg-blue-600 border-blue-600 text-white shadow-lg transform hover:scale-105';

          tabProducts.className =
            'tab-btn px-8 py-3 rounded-xl text-2xl font-bold border-2 transition-all duration-300 ease-in-out focus:outline-none bg-white border-green-500 text-green-700 shadow-lg transform hover:scale-105';
        }

        // Tab click events
        if (tabProducts) {
          tabProducts.addEventListener('click', function (e) {
            e.preventDefault();
            switchToProductsTab();
          });
        }

        if (tabTransactions) {
          tabTransactions.addEventListener('click', function (e) {
            e.preventDefault();
            switchToTransactionsTab();
          });
        }

        // Initialize - show products tab by default
        productsSection.style.opacity = '1';
        switchToProductsTab();

        // Products search functionality
        const searchProductInput =
          document.getElementById('searchProductInput');
        const clearProductBtn = document.getElementById('clearProductBtn');
        const searchProductForm = searchProductInput.closest('form');

        // Show clear button if there's a keyword from server
        if (searchProductInput && clearProductBtn) {
          const hasKeyword =
            searchProductInput.value && searchProductInput.value.trim() !== '';
          clearProductBtn.style.display = hasKeyword ? 'block' : 'none';
        }

        // Clear product search
        if (clearProductBtn) {
          clearProductBtn.addEventListener('click', function (e) {
            e.preventDefault();
            searchProductInput.value = '';
            clearProductBtn.style.display = 'none';
            window.location.href = '/warehouse/product';
          });
        }

        // Show/hide clear button on input
        searchProductInput.addEventListener('input', function () {
          if (clearProductBtn) {
            clearProductBtn.style.display =
              this.value.trim() === '' ? 'none' : 'block';
          }
        });

        // Enter key to submit form
        searchProductInput.addEventListener('keypress', function (e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            searchProductForm.submit();
          }
        });

        // Transactions search functionality
        const searchTransactionInput = document.getElementById(
          'searchTransactionInput'
        );
        const clearTransactionBtn = document.getElementById(
          'clearTransactionBtn'
        );
        const searchTransactionForm = searchTransactionInput.closest('form');

        // Show clear button if there's a keyword from server
        if (searchTransactionInput && clearTransactionBtn) {
          const hasKeyword =
            searchTransactionInput.value &&
            searchTransactionInput.value.trim() !== '';
          clearTransactionBtn.style.display = hasKeyword ? 'block' : 'none';
        }

        // Clear transaction search
        if (clearTransactionBtn) {
          clearTransactionBtn.addEventListener('click', function (e) {
            e.preventDefault();
            searchTransactionInput.value = '';
            clearTransactionBtn.style.display = 'none';
            window.location.href = '/warehouse/transactions';
          });
        }

        // Show/hide clear button on input
        searchTransactionInput.addEventListener('input', function () {
          if (clearTransactionBtn) {
            clearTransactionBtn.style.display =
              this.value.trim() === '' ? 'none' : 'block';
          }
        });

        // Enter key to submit form
        searchTransactionInput.addEventListener('keypress', function (e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            searchTransactionForm.submit();
          }
        });

        // Delete transaction functionality
        const deleteTransactionButtons = document.querySelectorAll(
          '.btn-delete-transaction'
        );

        deleteTransactionButtons.forEach((button) => {
          button.addEventListener('click', function (e) {
            e.preventDefault();
            const transactionId = this.getAttribute('data-id');
            const productName = this.getAttribute('data-name');

            if (
              confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a giao d·ªãch "${productName}"?`)
            ) {
              const form = document.getElementById(
                'deleteTransactionForm-' + transactionId
              );
              if (form) {
                form.submit();
              }
            }
          });
        });
      });
    </script>
  </body>
</html>
